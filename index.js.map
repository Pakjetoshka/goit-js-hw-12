{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = `46861005-d1ea17891df84db160fa13612`;\nconst PER_PAGE = 15;\n\nasync function fetchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\nexport { fetchImages };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector('.gallery');\nconst moreBtn = document.querySelector('.more-btn');\nlet lightbox = new SimpleLightbox('.gallery a');\n\n export function showBtn() {\n  moreBtn.style.display = 'block';\n}\nexport function hideBtn() {\n  moreBtn.style.display = 'none';\n}\n\nfunction renderGallery(images) {\n  const markup = images.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `\n  <li class=\"image-card\">\n        <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\">\n        </a>\n        <div class=\"image-info\">\n                <p> Likes ${likes}</p>\n                <p> Comments ${comments}</p>\n                <p> Views ${views}</p>\n                <p> Downloads ${downloads}</p>\n</div>\n        </li>`)\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n};\n\nfunction scrollMore() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n\nexport { scrollMore };\nexport { clearGallery };\nexport { renderGallery };","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  hideBtn,\n  showBtn,\n  scrollMore,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst moreBtn = document.querySelector('.more-btn');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet per_page = 15;\nhideBtn();\n\nfunction showLoader() {\n  loader.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nasync function loadImages() {\n  try {\n    showLoader();\n    const data = await fetchImages(query, page);\n\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.info({\n        message:\n          'Sorry, has no images for your request',\n        position: 'topRight'\n      });\n      hideBtn();\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    if (page * per_page >= totalHits) {\n      hideBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      showBtn();\n    }\n    scrollMore();\n  }\n  catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const request = event.currentTarget.elements.searchRequest.value.trim();\n\n  if (!request) {\n    iziToast.warning({\n      message: 'Please enter a valid search term.',\n      position: 'topRight',\n    });\n    clearGallery();\n    hideBtn();\n    return;\n  }\n\n  query = request;\n  page = 1;\n  clearGallery();\n  hideBtn();\n  showLoader();\n  loadImages();\n});\n\nmoreBtn.addEventListener('click', () => {\n  page += 1;\n  showLoader();\n  loadImages();\n});"],"names":["BASE_URL","API_KEY","PER_PAGE","fetchImages","query","page","params","axios","error","gallery","moreBtn","lightbox","SimpleLightbox","showBtn","hideBtn","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","scrollMore","cardHeight","form","loader","totalHits","per_page","showLoader","hideLoader","loadImages","data","iziToast","event","request"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCACVC,EAAW,GAEjB,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC1C,MAAMC,EAAS,CACb,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACJ,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIP,EAAU,CAAE,OAAAM,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEtC,SAASC,GAAU,CACzBH,EAAQ,MAAM,QAAU,OAC1B,CACO,SAASI,GAAU,CACxBJ,EAAQ,MAAM,QAAU,MAC1B,CAEA,SAASK,EAAcC,EAAQ,CAC7B,MAAMC,EAASD,EAAO,IAAI,CAAC,CACzB,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAQ;AAAA;AAAA,mBAEWL,CAAa;AAAA,oBACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,4BAGlBC,CAAK;AAAA,+BACFE,CAAQ;AAAA,4BACXD,CAAK;AAAA,gCACDE,CAAS;AAAA;AAAA,cAE3B,EACT,KAAK,EAAE,EACVf,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CN,EAAS,QAAO,CAClB,CAGA,SAASc,GAAe,CACtBhB,EAAQ,UAAY,EACtB,CAEA,SAASiB,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAY,EAC1BlB,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAKkB,EACL,SAAU,QACd,CAAG,CACH,CC1CA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCnB,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIN,EAAQ,GACRC,EAAO,EACPyB,EAAY,EACZC,EAAW,GACfjB,IAEA,SAASkB,GAAa,CACpBH,EAAO,MAAM,QAAU,MACzB,CAEA,SAASI,GAAa,CACpBJ,EAAO,MAAM,QAAU,MACzB,CAEA,eAAeK,GAAa,CAC1B,GAAI,CACFF,IACA,MAAMG,EAAO,MAAMhC,EAAYC,EAAOC,CAAI,EAI1C,GAFAyB,EAAYK,EAAK,UAEbA,EAAK,KAAK,SAAW,GAAK9B,IAAS,EAAG,CACxC+B,EAAS,KAAK,CACZ,QACE,wCACF,SAAU,UAClB,CAAO,EACDtB,IACA,MACD,CAEDC,EAAcoB,EAAK,IAAI,EAEnB9B,EAAO0B,GAAYD,GACrBhB,IACAsB,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAEDvB,IAEFa,GACD,OACMlB,EAAO,CACZ4B,EAAS,MAAM,CACb,MAAO,QACP,QAAS5B,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRyB,GACD,CACH,CAEAL,EAAK,iBAAiB,SAAUS,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAUD,EAAM,cAAc,SAAS,cAAc,MAAM,OAEjE,GAAI,CAACC,EAAS,CACZF,EAAS,QAAQ,CACf,QAAS,oCACT,SAAU,UAChB,CAAK,EACDX,IACAX,IACA,MACD,CAEDV,EAAQkC,EACRjC,EAAO,EACPoB,IACAX,IACAkB,IACAE,GACF,CAAC,EAEDxB,EAAQ,iBAAiB,QAAS,IAAM,CACtCL,GAAQ,EACR2B,IACAE,GACF,CAAC"}